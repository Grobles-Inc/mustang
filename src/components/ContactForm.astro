---
// Componente de formulario de contacto
import { handleFormSubmit } from "../utils/whatsapp";
const currentLocale = Astro.currentLocale || "en";
---

<section class="py-20">
  <!-- Contenedor del formulario -->

  <div
    class="bg-white bg-opacity-70 p-8 mx-auto max-w-2xl rounded-2xl shadow-2xl w-full overflow-hidden"
    data-aos="fade-up"
  >
    <!-- Sección derecha - Formulario -->

    <h3 class="text-xl font-bold text-gray-800 mb-8">
      {currentLocale === "en" ? "BOOK A SERVICE" : "RESERVAR UN SERVICIO"}
    </h3>

    <form class="space-y-6" id="contactForm">
      <!-- Campos de entrada -->
      <div class="space-y-4">
        <div>
          <input
            type="text"
            name="nombre"
            required
            class="w-full border-b-2 border-gray-300 focus:border-blue-500 outline-none py-2 transition-colors text-xl"
            placeholder={currentLocale === "en" ? "Name" : "Nombres"}
          />
        </div>

        <div>
          <input
            type="tel"
            name="numero"
            required
            class="w-full border-b-2 border-gray-300 focus:border-blue-500 outline-none py-2 transition-colors text-xl"
            placeholder={currentLocale === "en" ? "Phone" : "Teléfono"}
          />
        </div>

        <div>
          <input
            type="text"
            name="carro"
            required
            class="w-full border-b-2 border-gray-300 focus:border-blue-500 outline-none py-2 transition-colors text-xl"
            placeholder={currentLocale === "en"
              ? "Car brand / Model"
              : "Marca Vehículo / Modelo"}
          />
        </div><div>
          <input
            type="text"
            name="ubicacion"
            required
            class="w-full border-b-2 border-gray-300 focus:border-blue-500 outline-none py-2 transition-colors text-xl"
            placeholder={currentLocale === "en" ? "Location" : "Ubicación"}
          />
        </div>
        <div>
          <label class="block text-xl font-medium text-gray-700 mb-2">
            {currentLocale === "en" ? "Service Day" : "Día de servicio"}
          </label>
          <input
            type="date"
            name="fecha"
            required
            class="w-full border-b-2 border-gray-300 focus:border-blue-500 outline-none py-2 transition-colors text-xl"
          />
        </div>
      </div>

      <!-- Sección de servicios -->
      <div class="mt-8">
        <div class="space-y-3">
          <!-- Paquetes -->
          <div class="border-b border-gray-200 pb-4 mb-4">
            <h5 class="text-lg font-semibold text-gray-700 mb-3">
              {currentLocale === "en" ? "Packages" : "Paquetes"}
            </h5>

            <label class="flex items-center space-x-3 cursor-pointer">
              <input
                type="checkbox"
                name="servicios"
                value="basic-package"
                class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
              />
              <span class="text-xl text-gray-700"
                >{
                  currentLocale === "en" ? "Basic Package" : "Paquete básico"
                }</span
              >
            </label>

            <label class="flex items-center space-x-3 cursor-pointer">
              <input
                type="checkbox"
                name="servicios"
                value="premium-package"
                class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
              />
              <span class="text-xl text-gray-700"
                >{
                  currentLocale === "en" ? "Premium Package" : "Paquete premium"
                }</span
              >
            </label>

            <label class="flex items-center space-x-3 cursor-pointer">
              <input
                type="checkbox"
                name="servicios"
                value="salon-wash-service"
                class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
              />
              <span class="text-xl text-gray-700"
                >{
                  currentLocale === "en"
                    ? "Salon Wash Service"
                    : "Servicio de lavado de salón"
                }</span
              >
            </label>
          </div>
          <!-- Servicios individuales -->
          <div>
            <h5 class="text-lg font-semibold text-gray-700 mb-3">
              {
                currentLocale === "en"
                  ? "Individual Services"
                  : "Servicios Individuales"
              }
            </h5>

            <label class="flex items-center space-x-3 cursor-pointer">
              <input
                type="checkbox"
                name="servicios"
                value="seat-cleaning"
                class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
              />
              <span class="text-xl text-gray-700"
                >{
                  currentLocale === "en"
                    ? "Seat Cleaning"
                    : "Lavado de asientos"
                }</span
              >
            </label>

            <label class="flex items-center space-x-3 cursor-pointer">
              <input
                type="checkbox"
                name="servicios"
                value="carpet-cleaning"
                class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
              />
              <span class="text-xl text-gray-700"
                >{
                  currentLocale === "en"
                    ? "Carpet Cleaning"
                    : "Lavado de alfombras"
                }</span
              >
            </label>

            <label class="flex items-center space-x-3 cursor-pointer">
              <input
                type="checkbox"
                name="servicios"
                value="ceiling-washing"
                class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
              />
              <span class="text-xl text-gray-700"
                >{
                  currentLocale === "en"
                    ? "Ceiling stain removal"
                    : "Desmanchado de techo"
                }</span
              >
            </label>

            <label class="flex items-center space-x-3 cursor-pointer">
              <input
                type="checkbox"
                name="servicios"
                value="interior-plastics-cleaning"
                class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
              />
              <span class="text-xl text-gray-700"
                >{
                  currentLocale === "en"
                    ? "Cleaning and conditioning of interior plastics"
                    : "Lavado y acondicionamiento de plásticos internos"
                }</span
              >
            </label>

            <label class="flex items-center space-x-3 cursor-pointer">
              <input
                type="checkbox"
                name="servicios"
                value="bodywork-cleaning"
                class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
              />
              <span class="text-xl text-gray-700"
                >{
                  currentLocale === "en"
                    ? "Bodywork Cleaning"
                    : "Lavado de carrocería"
                }</span
              >
            </label>

            <label class="flex items-center space-x-3 cursor-pointer">
              <input
                type="checkbox"
                name="servicios"
                value="detailed-engine-cleaning"
                class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
              />
              <span class="text-xl text-gray-700"
                >{
                  currentLocale === "en"
                    ? "Detailed engine cleaning"
                    : "Lavado de motor al detalle"
                }</span
              >
            </label>
            <label class="flex items-center space-x-3 cursor-pointer">
              <input
                type="checkbox"
                name="servicios"
                value="paint-correction"
                class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
              />
              <span class="text-xl text-gray-700"
                >{
                  currentLocale === "en"
                    ? "Paint correction"
                    : "Corrección de pintura"
                }</span
              >
            </label>
            <label class="flex items-center space-x-3 cursor-pointer">
              <input
                type="checkbox"
                name="servicios"
                value="polish-application"
                class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
              />
              <span class="text-xl text-gray-700"
                >{
                  currentLocale === "en"
                    ? "Polish application"
                    : "Aplicación de polish"
                }</span
              >
            </label>
          </div>
        </div>
      </div>

      <!-- Botón de envío -->
      <button type="submit" class="btn btn-primary btn-lg w-full py-4">
        <span>{currentLocale === "en" ? "Book now" : "Reservar"}</span>
      </button>
    </form>
  </div>
</section>

<script>
  import { handleFormSubmit } from "../utils/whatsapp";
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("contactForm");
    if (form) {
      form.addEventListener("submit", function (event) {
        // Obtener el idioma actual desde el atributo data o desde la URL
        const currentLocale =
          document.documentElement.lang ||
          (window.location.pathname.includes("/es/") ? "es" : "en");

        handleFormSubmit(event, "12792727136", currentLocale);
      });
    }
  });
</script>
